# ë°ì´í„° ëª¨ë¸ ë° íŒŒì¼ í¬ë§·

## ğŸ“Š ë°ì´í„° ì €ì¥ ë°©ì‹

My-Routine-AdventureëŠ” í…ìŠ¤íŠ¸ íŒŒì¼ ê¸°ë°˜ì˜ ê°„ë‹¨í•œ ì €ì¥ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### ì €ì¥ íŒŒì¼ ëª©ë¡
| íŒŒì¼ëª… | ì„¤ëª… | ìœ„ì¹˜ |
|--------|------|------|
| `routines_data.txt` | ë£¨í‹´ ë°ì´í„° | J1103/ |
| `player_data.txt` | í”Œë ˆì´ì–´ ë°ì´í„° | J1103/ |
| `boss_data.txt` | ë³´ìŠ¤ ë°ì´í„° (ì˜ˆì •) | J1103/ |

---

## ğŸ“ íŒŒì¼ í¬ë§· ìƒì„¸

### 1. routines_data.txt (ë£¨í‹´ ë°ì´í„°)

#### í˜•ì‹
```
ID|ì´ë¦„|íƒœê·¸|ìš”ì¼ëª©ë¡|ì™„ë£Œê¸°ë¡
```

#### êµ¬ë¶„ì
| êµ¬ë¶„ì | ì½”ë“œ | ìš©ë„ |
|--------|------|------|
| íŒŒì´í”„ | `\|` | í•„ë“œ êµ¬ë¶„ |
| ì½¤ë§ˆ | `,` | ìš”ì¼ ëª©ë¡ êµ¬ë¶„ |
| ì„¸ë¯¸ì½œë¡  | `;` | ì™„ë£Œ ê¸°ë¡ í•­ëª© êµ¬ë¶„ |
| ì½œë¡  | `:` | ìš”ì¼ê³¼ ë‚ ì§œ êµ¬ë¶„ |

#### ì˜ˆì‹œ
```
R1|ë…ì„œ|ê³µë¶€|ì›”,ìˆ˜,ê¸ˆ|ì›”:2025-12-01;ìˆ˜:2025-12-03;ê¸ˆ:2025-12-05
R2|ìš´ë™|ìš´ë™|í™”,ëª©,í† |í™”:2025-12-04
R3|ëª…ìƒ|ìƒí™œ|ì›”,í™”,ìˆ˜,ëª©,ê¸ˆ,í† ,ì¼|null
```

#### í•„ë“œ ì„¤ëª…
| ì¸ë±ìŠ¤ | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|--------|------|------|------|
| 0 | ID | String | ê³ ìœ  ì‹ë³„ì (R + ìˆ«ì) | `R1` |
| 1 | ì´ë¦„ | String | ë£¨í‹´ ì´ë¦„ | `ë…ì„œ` |
| 2 | íƒœê·¸ | String | ë¶„ë¥˜ íƒœê·¸ | `ê³µë¶€` |
| 3 | ìš”ì¼ëª©ë¡ | List | ì½¤ë§ˆë¡œ êµ¬ë¶„ëœ ë°˜ë³µ ìš”ì¼ | `ì›”,ìˆ˜,ê¸ˆ` |
| 4 | ì™„ë£Œê¸°ë¡ | Map | ìš”ì¼ë³„ ë§ˆì§€ë§‰ ì™„ë£Œ ë‚ ì§œ | `ì›”:2025-12-01;ìˆ˜:2025-12-03` |

#### ì™„ë£Œ ê¸°ë¡ í¬ë§· ìƒì„¸
```
ìš”ì¼1:ë‚ ì§œ1;ìš”ì¼2:ë‚ ì§œ2;ìš”ì¼3:ë‚ ì§œ3
```
- ìš”ì¼: "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† ", "ì¼" ì¤‘ í•˜ë‚˜
- ë‚ ì§œ: ISO-8601 í˜•ì‹ (`yyyy-MM-dd`)
- ì™„ë£Œ ê¸°ë¡ì´ ì—†ìœ¼ë©´ `null` ì €ì¥

---

### 2. player_data.txt (í”Œë ˆì´ì–´ ë°ì´í„°)

#### í˜•ì‹
```
ì´ë¦„|ë ˆë²¨|í˜„ì¬ê²½í—˜ì¹˜|ìµœëŒ€ê²½í—˜ì¹˜|ê³¨ë“œ
```

#### ì˜ˆì‹œ
```
ë£¨í‹´ë§ˆìŠ¤í„°|5|75|200|350
```

#### í•„ë“œ ì„¤ëª…
| ì¸ë±ìŠ¤ | í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|--------|------|------|------|
| 0 | ì´ë¦„ | String | í”Œë ˆì´ì–´ ì´ë¦„ | `ë£¨í‹´ë§ˆìŠ¤í„°` |
| 1 | ë ˆë²¨ | int | í˜„ì¬ ë ˆë²¨ | `5` |
| 2 | í˜„ì¬ê²½í—˜ì¹˜ | int | í˜„ì¬ ë³´ìœ  ê²½í—˜ì¹˜ | `75` |
| 3 | ìµœëŒ€ê²½í—˜ì¹˜ | int | ë ˆë²¨ì—…ì— í•„ìš”í•œ ê²½í—˜ì¹˜ | `200` |
| 4 | ê³¨ë“œ | int | ë³´ìœ  ê³¨ë“œ | `350` |

#### ê¸°ë³¸ê°’ (ìƒˆ ê²Œì„ ì‹œì‘)
```
ëª¨í—˜ê°€|1|0|120|0
```

---

## ğŸ’¾ ì €ì¥/ë¡œë“œ ë¡œì§

### ì €ì¥ ì‹œì 
1. **ë£¨í‹´ ìƒì„±** (`RoutineManager.addRoutine()`)
2. **ë£¨í‹´ ìˆ˜ì •** (`RoutineManager.updateRoutine()`)
3. **ë£¨í‹´ ì‚­ì œ** (`RoutineManager.deleteRoutine()`)
4. **ë£¨í‹´ ì™„ë£Œ** (`RoutineManager.completeRoutine()`)
5. **í”„ë¡œê·¸ë¨ ì¢…ë£Œ** (ì°½ ë‹«ê¸° ì´ë²¤íŠ¸)

### ì €ì¥ íë¦„
```java
// RoutineManager.saveAllData()
public void saveAllData() {
    // 1. ë£¨í‹´ ë°ì´í„° ì €ì¥
    fileManager.saveRoutinesToFile(getAllRoutines(), "routines_data.txt");
    
    // 2. í”Œë ˆì´ì–´ ë°ì´í„° ì €ì¥
    if (player != null) {
        fileManager.savePlayerState(player, "player_data.txt");
    }
}
```

### ë¡œë“œ ì‹œì 
- **í”„ë¡œê·¸ë¨ ì‹œì‘** (`MainDashboard` ìƒì„±ì, `RoutineManager` ìƒì„±ì)

### ë¡œë“œ íë¦„
```java
// MainDashboard ìƒì„±ì
public MainDashboard() {
    // 1. RoutineManager ìƒì„± (ë£¨í‹´ ë°ì´í„° ìë™ ë¡œë“œ)
    this.manager = new RoutineManager();
    
    // 2. Player ë°ì´í„° ë¡œë“œ ì‹œë„
    Player loadedPlayer = fileManager.loadPlayerState();
    if (loadedPlayer != null) {
        this.player = loadedPlayer;
    } else {
        this.player = new Player("ë£¨í‹´ ìˆ˜í–‰ì"); // ê¸°ë³¸ê°’
    }
}
```

---

## ğŸ”„ ë°ì´í„° íë¦„ë„

### ë£¨í‹´ ì™„ë£Œ ì‹œ ë°ì´í„° íë¦„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì ì²´í¬ë°•ìŠ¤   â”‚
â”‚     í´ë¦­        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RoutineManager   â”‚â”€â”€â”€â”€â–¶â”‚ Routine ê°ì²´      â”‚
â”‚ completeRoutine()â”‚     â”‚ completeForDay() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ (ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸)  â”‚
         â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Player       â”‚â”€â”€â”€â”€â–¶â”‚ streakDates.add()â”‚
â”‚ gainExpAndGold() â”‚     â”‚ (ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸)  â”‚
â”‚ updateStreak()   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RoutineManager   â”‚â”€â”€â”€â”€â–¶â”‚ FileManager          â”‚
â”‚   saveAllData()  â”‚     â”‚ saveRoutinesToFile() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ savePlayerState()    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ routines_data.txt    â”‚
                         â”‚ player_data.txt      â”‚
                         â”‚ (íŒŒì¼ ì €ì¥)           â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ë°ì´í„° í´ë˜ìŠ¤ êµ¬ì¡°

### Routine ë©”ëª¨ë¦¬ êµ¬ì¡°
```java
public class Routine {
    private String id;                              // "R1"
    private String name;                            // "ë…ì„œ"
    private String tag;                             // "ê³µë¶€"
    private List<String> repeatDays;                // ["ì›”", "ìˆ˜", "ê¸ˆ"]
    private Map<String, LocalDate> lastCompletedDate; // {"ì›”": 2025-12-01, "ìˆ˜": 2025-12-03}
}
```

### Player ë©”ëª¨ë¦¬ êµ¬ì¡°
```java
public class Player implements Serializable {
    private String name;                  // "ë£¨í‹´ë§ˆìŠ¤í„°"
    private int level;                    // 5
    private int currentExp;               // 75
    private int maxExp;                   // 200
    private int gold;                     // 350
    private Inventory inventory;          // ì¸ë²¤í† ë¦¬ ê°ì²´
    private Set<LocalDate> streakDates;   // {2025-12-01, 2025-12-03, 2025-12-05}
}
```

### Inventory ë©”ëª¨ë¦¬ êµ¬ì¡°
```java
public class Inventory implements Serializable {
    private List<Item> items;                           // ê°€ë°© ì•„ì´í…œ
    private Map<Item.EquipSlot, Item> equippedItems;   // ì¥ì°© ì•„ì´í…œ
    // {HEAD: Item, BODY: Item, LEG: null, WEAPON: Item, NONE: null}
}
```

---

## âš ï¸ í˜„ì¬ ë¯¸ì €ì¥ ë°ì´í„°

í˜„ì¬ ë²„ì „ì—ì„œ íŒŒì¼ì— ì €ì¥ë˜ì§€ ì•ŠëŠ” ë°ì´í„°:

| ë°ì´í„° | ì €ì¥ ì—¬ë¶€ | ë¹„ê³  |
|--------|----------|------|
| ë£¨í‹´ ëª©ë¡ | âœ… ì €ì¥ë¨ | |
| ë£¨í‹´ ì™„ë£Œ ê¸°ë¡ | âœ… ì €ì¥ë¨ | ìš”ì¼ë³„ ë§ˆì§€ë§‰ ì™„ë£Œ ë‚ ì§œ |
| í”Œë ˆì´ì–´ ê¸°ë³¸ ì •ë³´ | âœ… ì €ì¥ë¨ | ì´ë¦„, ë ˆë²¨, ê²½í—˜ì¹˜, ê³¨ë“œ |
| ì¸ë²¤í† ë¦¬ | âŒ ë¯¸ì €ì¥ | í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œ ì´ˆê¸°í™”ë¨ |
| ì¥ì°© ì¥ë¹„ | âŒ ë¯¸ì €ì¥ | í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œ ì´ˆê¸°í™”ë¨ |
| ìŠ¤íŠ¸ë¦­ ë‚ ì§œ | âŒ ë¯¸ì €ì¥ | í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œ ì´ˆê¸°í™”ë¨ |
| ë³´ìŠ¤ ìƒíƒœ | âŒ ë¯¸ì €ì¥ | ë§¤ë²ˆ ìƒˆë¡œ ìƒì„±ë¨ |

### ê°œì„  í•„ìš” ì‚¬í•­
1. `Inventory` ì§ë ¬í™” ì €ì¥ êµ¬í˜„
2. `streakDates` íŒŒì¼ ì €ì¥ êµ¬í˜„
3. `Boss` ìƒíƒœ ì €ì¥ êµ¬í˜„

---

## ğŸ”’ ë°ì´í„° ë¬´ê²°ì„±

### ID ê´€ë¦¬
```java
// RoutineManager.java
private int routineCounter = 0;

// ë¡œë“œ ì‹œ ìµœëŒ€ ID ì¶”ì¶œ
for (Routine routine : loadedRoutines) {
    int idNum = Integer.parseInt(routine.getId().substring(1)); // "R10" -> 10
    if (idNum > maxId) maxId = idNum;
}
routineCounter = maxId;

// ìƒˆ ë£¨í‹´ ìƒì„± ì‹œ
String id = "R" + (++routineCounter); // "R11"
```

### ë™ì‹œì„± ì²˜ë¦¬
```java
// ConcurrentHashMap ì‚¬ìš©ìœ¼ë¡œ ìŠ¤ë ˆë“œ ì•ˆì „ì„± í™•ë³´
private final Map<String, Routine> allRoutines = new ConcurrentHashMap<>();
private Map<String, LocalDate> lastCompletedDate = new ConcurrentHashMap<>();
```

---

## ğŸ“ˆ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜

### ì´ì „ ë²„ì „ í˜¸í™˜
```java
// ìµœì†Œ 4ê°œ í•„ë“œë§Œ ìˆì–´ë„ ë¡œë“œ ê°€ëŠ¥ (êµ¬ë²„ì „ í˜¸í™˜)
if (parts.length >= 4) {
    String id = parts[0];
    String name = parts[1];
    String tag = parts[2];
    List<String> repeatDays = Arrays.asList(parts[3].split(","));
    
    // 5ë²ˆì§¸ í•„ë“œ(ì™„ë£Œ ê¸°ë¡)ê°€ ì—†ìœ¼ë©´ ë¹ˆ Map ì‚¬ìš©
    Map<String, LocalDate> lastCompletedDateMap = new ConcurrentHashMap<>();
    if (parts.length > 4 && !"null".equals(parts[4])) {
        // ì™„ë£Œ ê¸°ë¡ íŒŒì‹±
    }
}
```
