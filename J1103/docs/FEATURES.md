# 기능 상세 및 요구사항 매핑

## 📋 기능 목록

My-Routine-Adventure의 모든 기능을 카테고리별로 정리합니다.

---

## 1. 루틴 관리 (Core Features)

### 1.1 루틴 생성
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-001 |
| **설명** | 새로운 루틴을 생성합니다 |
| **입력** | 루틴 이름, 태그, 반복 요일 |
| **처리** | ID 자동 생성 (R + 카운터), Map에 저장, 파일 저장 |
| **결과** | 루틴 목록에 추가, 시스템 로그 출력 |
| **관련 클래스** | `RoutineManagerGUI`, `RoutineManager.addRoutine()` |

### 1.2 루틴 수정
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-002 |
| **설명** | 기존 루틴의 정보를 수정합니다 |
| **입력** | 루틴 ID, 새 이름, 새 태그, 새 반복 요일 |
| **처리** | 루틴 객체 필드 업데이트, 파일 저장 |
| **결과** | 변경사항 반영, 시스템 로그 출력 |
| **관련 클래스** | `RoutineModify`, `RoutineManager.updateRoutine()` |

### 1.3 루틴 삭제
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-003 |
| **설명** | 루틴을 삭제합니다 |
| **입력** | 루틴 ID |
| **처리** | 확인 다이얼로그 표시, Map에서 제거, 파일 저장 |
| **결과** | 루틴 목록에서 제거, 시스템 로그 출력 |
| **관련 클래스** | `PopupListener`, `RoutineManager.deleteRoutine()` |

### 1.4 루틴 완료 처리
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-004 |
| **설명** | 루틴을 완료 상태로 표시하고 보상을 지급합니다 |
| **입력** | 루틴 ID, 요일 |
| **처리** | 1. 완료 날짜 기록<br>2. 경험치/골드 지급<br>3. 스트릭 업데이트<br>4. 아이템 드랍 시도 |
| **결과** | 경험치 +10, 골드 +5, 20% 확률로 아이템 획득 |
| **관련 클래스** | `RoutineListView`, `RoutineManager.completeRoutine()` |

### 1.5 루틴 목록 조회
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-005 |
| **설명** | 요일별로 루틴 목록을 표시합니다 |
| **처리** | 요일 필터링, 완료 상태 표시 |
| **결과** | 테이블 형태로 루틴 목록 표시 |
| **관련 클래스** | `RoutineListView`, `RoutineManager.getRoutinesByDay()` |

---

## 2. 플레이어 시스템

### 2.1 경험치 획득 및 레벨업
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-010 |
| **설명** | 루틴 완료 시 경험치를 획득하고 레벨업합니다 |
| **공식** | 기본 EXP + 장비 보너스 EXP |
| **레벨업 조건** | currentExp >= maxExp |
| **maxExp 공식** | 100 + (level * 20) |
| **관련 클래스** | `Player.gainExpAndGold()` |

### 2.2 골드 획득
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-011 |
| **설명** | 루틴 완료 시 골드를 획득합니다 |
| **획득량** | 5 골드/루틴 완료 |
| **용도** | 상점에서 아이템 구매 |
| **관련 클래스** | `Player.gainExpAndGold()` |

### 2.3 스트릭(연속 달성) 기록
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-012 |
| **설명** | 루틴 완료일을 기록합니다 |
| **저장 형식** | `Set<LocalDate>` |
| **표시** | 달력에 녹색으로 표시 |
| **관련 클래스** | `Player.updateStreak()`, `StreakWindow` |

---

## 3. 아이템 및 인벤토리 시스템

### 3.1 아이템 획득 (드랍)
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-020 |
| **요구사항 ID** | REQ-022 |
| **설명** | 루틴 완료 시 확률적으로 아이템을 획득합니다 |
| **드랍 확률** | 20% (0.2) |
| **드랍 아이템** | 루틴 달성 보물 상자, 행운의 동전, 빛나는 은화, 집중의 향로 |
| **관련 클래스** | `ItemDropManager.dropItem()` |

### 3.2 아이템 장착
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-021 |
| **설명** | 인벤토리의 아이템을 장착합니다 |
| **장착 부위** | 머리, 몸통, 다리, 무기 |
| **효과** | 공격력 또는 경험치 보너스 |
| **관련 클래스** | `Inventory.equipItem()`, `InventoryView` |

### 3.3 아이템 해제
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-022 |
| **설명** | 장착된 아이템을 해제합니다 |
| **처리** | 장비 슬롯을 null로 설정 |
| **관련 클래스** | `Inventory.unequipItem()`, `InventoryView` |

### 3.4 아이템 구매
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-023 |
| **설명** | 상점에서 골드로 아이템을 구매합니다 |
| **조건** | 보유 골드 >= 아이템 가격 |
| **처리** | 골드 차감, 인벤토리에 아이템 추가 |
| **관련 클래스** | `Player.buyItem()`, `ShopView` |

### 3.5 장비 효과 적용
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-024 |
| **설명** | 장착된 아이템의 효과를 계산합니다 |
| **공격력 보너스** | 보스 데미지 증가 |
| **경험치 보너스** | 루틴 완료 시 추가 경험치 |
| **관련 클래스** | `Inventory.getTotalBonusDamage()`, `Inventory.getTotalBonusExp()` |

---

## 4. 보스 시스템

### 4.1 월별 보스 생성
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-030 |
| **설명** | 현재 월에 해당하는 보스를 생성합니다 |
| **보스 HP** | 100 (고정) |
| **월별 테마** | 1월~12월 각각 다른 보스 |
| **관련 클래스** | `Boss.spawnBossForThisMonth()` |

### 4.2 보스 공격 (미구현)
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-031 |
| **상태** | ⚠️ 구현 예정 |
| **설명** | 루틴 완료 시 보스에게 데미지를 줍니다 |
| **공식** | 기본 데미지 + 장비 공격력 보너스 |
| **관련 클래스** | `Boss.takeDamage()` |

### 4.3 보스 처치 보상 (미구현)
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-032 |
| **상태** | ⚠️ 구현 예정 |
| **설명** | 보스 처치 시 스토리 및 보상 지급 |
| **관련 클래스** | `Boss.getHappyStory()` |

---

## 5. 통계 및 분석

### 5.1 월간 달성률 계산
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-040 |
| **요구사항 ID** | REQ-029 |
| **설명** | 이번 달 루틴 수행 일수와 달성률을 계산합니다 |
| **공식** | (활성일수 / 총일수) * 100 |
| **관련 클래스** | `StatisticsPanel.updateStatistics()` |

### 5.2 격려 메시지 표시
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-041 |
| **요구사항 ID** | REQ-030 |
| **설명** | 달성률에 따른 맞춤 격려 메시지를 표시합니다 |
| **기준** | 0%, 1-29%, 30-69%, 70%+ |
| **관련 클래스** | `StatisticsPanel.updateMessageAndDetails()` |

### 5.3 연속 달성 달력
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-042 |
| **설명** | 월별 달력에 루틴 완료일을 표시합니다 |
| **네비게이션** | 이전/다음 월 이동 가능 |
| **관련 클래스** | `StreakWindow.updateCalendarUI()` |

---

## 6. 데이터 영속성

### 6.1 루틴 데이터 저장/로드
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-050 |
| **설명** | 루틴 데이터를 파일에 저장하고 로드합니다 |
| **파일** | `routines_data.txt` |
| **저장 시점** | 루틴 변경 시, 프로그램 종료 시 |
| **관련 클래스** | `FileManager.saveRoutinesToFile()`, `FileManager.loadRoutinesFromFile()` |

### 6.2 플레이어 데이터 저장/로드
| 항목 | 내용 |
|------|------|
| **기능 ID** | FEAT-051 |
| **설명** | 플레이어 상태를 파일에 저장하고 로드합니다 |
| **파일** | `player_data.txt` |
| **저장 항목** | 이름, 레벨, 경험치, 골드 |
| **관련 클래스** | `FileManager.savePlayerState()`, `FileManager.loadPlayerState()` |

---

## 📊 요구사항 추적표

| 요구사항 ID | 설명 | 구현 상태 | 관련 기능 |
|------------|------|----------|----------|
| REQ-001 | 루틴 생성 | ✅ 완료 | FEAT-001 |
| REQ-002 | 루틴 수정 | ✅ 완료 | FEAT-002 |
| REQ-003 | 루틴 삭제 | ✅ 완료 | FEAT-003 |
| REQ-004 | 루틴 완료 체크 | ✅ 완료 | FEAT-004 |
| REQ-005 | 요일별 루틴 필터링 | ✅ 완료 | FEAT-005 |
| REQ-010 | 경험치 시스템 | ✅ 완료 | FEAT-010 |
| REQ-011 | 레벨업 시스템 | ✅ 완료 | FEAT-010 |
| REQ-012 | 골드 시스템 | ✅ 완료 | FEAT-011 |
| REQ-020 | 인벤토리 시스템 | ✅ 완료 | FEAT-021, FEAT-022 |
| REQ-021 | 상점 시스템 | ✅ 완료 | FEAT-023 |
| REQ-022 | 아이템 드랍 | ✅ 완료 | FEAT-020 |
| REQ-023 | 장비 효과 | ✅ 완료 | FEAT-024 |
| REQ-025 | 월별 보스 | ⚠️ 부분 | FEAT-030 (표시만) |
| REQ-026 | 보스 공격 | ❌ 미구현 | FEAT-031 |
| REQ-027 | 보스 처치 보상 | ❌ 미구현 | FEAT-032 |
| REQ-029 | 월간 통계 | ✅ 완료 | FEAT-040 |
| REQ-030 | 격려 메시지 | ✅ 완료 | FEAT-041 |
| REQ-040 | 데이터 저장 | ⚠️ 부분 | FEAT-050, FEAT-051 |

---

## 🔧 미구현/개선 필요 기능

### 높은 우선순위
1. **보스 전투 시스템**: 루틴 완료 시 보스 데미지 연동
2. **인벤토리/장비 저장**: 프로그램 종료 후에도 유지
3. **스트릭 데이터 저장**: streakDates 파일 저장

### 중간 우선순위
4. **보스 처치 보상**: 월말 보스 처치 시 특별 보상
5. **태그별 통계**: SimpleBarChartPanel 활용
6. **알림 기능**: 루틴 리마인더

### 낮은 우선순위
7. **다국어 지원**: 영어 등 다른 언어
8. **테마 설정**: 다크 모드 등
9. **사운드 효과**: 루틴 완료/레벨업 효과음

---

## 🧪 테스트 시나리오

### 시나리오 1: 기본 루틴 관리
1. 프로그램 시작
2. "루틴 생성" 버튼 클릭
3. 루틴 이름: "독서", 태그: "공부", 요일: 월, 수, 금 선택
4. "루틴 생성" 버튼 클릭
5. "루틴 목록" 확인 → 금요일 탭에서 "독서" 확인
6. 체크박스 클릭 → 완료 처리
7. 시스템 로그에서 "✅ 루틴 완료: 독서" 확인
8. 경험치/골드 증가 확인

### 시나리오 2: 아이템 시스템
1. 여러 루틴 완료하여 골드 획득
2. "상점" 버튼 클릭
3. "수련용 목검" 선택 후 구매
4. "인벤토리" 확인 → 가방 탭에서 아이템 확인
5. 아이템 선택 후 "장착" 버튼 클릭
6. "착용 중인 장비" 탭에서 확인
7. 보너스 효과 적용 확인

### 시나리오 3: 통계 확인
1. 여러 날에 걸쳐 루틴 완료
2. "연속 달성 현황" 탭 클릭
3. 달력에서 완료일 녹색 표시 확인
4. "월간 통계" 탭 클릭
5. 달성률 및 격려 메시지 확인
