# ⚙️ 기능 명세

## 1. 루틴 관리 기능

### 1.1 루틴 생성
**위치:** 대시보드 → "루틴 생성" 버튼 → RoutineManagerGUI

**입력 항목:**
| 항목 | 타입 | 설명 |
|------|------|------|
| 루틴 이름 | 텍스트 | 필수, 공백 불가 |
| 태그 | 드롭다운 | 공부, 운동, 생활, 취미, 기타 |
| 반복 요일 | 체크박스 | 월~일 중 1개 이상 선택 필수 |

**처리 흐름:**
1. 사용자가 폼 작성 후 "루틴 생성" 클릭
2. `RoutineManager.addRoutine()` 호출
3. 고유 ID 생성 (R1, R2, ...)
4. 중앙 저장소 `allRoutines` Map에 추가
5. 로그 메시지 출력

### 1.2 루틴 수정
**위치:** 루틴 목록 → 우클릭 → "수정" → RoutineModify

**수정 가능 항목:**
- 루틴 이름
- 태그
- 반복 요일

**제한사항:**
- 루틴 ID는 수정 불가
- 완료 상태 기록은 유지

### 1.3 루틴 삭제
**위치:** 루틴 목록 → 우클릭 → "삭제"

**처리 흐름:**
1. 확인 팝업 표시
2. `RoutineManager.deleteRoutine()` 호출
3. `allRoutines` Map에서 제거
4. UI 갱신

### 1.4 루틴 완료
**위치:** 루틴 목록 → 체크박스 클릭

**완료 조건:**
| 조건 | 허용 여부 |
|------|----------|
| 오늘 요일 | ✅ 허용 |
| 어제 요일 | ❌ 불가 (1일 이상 과거) |
| 내일 이후 | ❌ 불가 (미래) |
| 이미 완료됨 | ❌ 불가 (해제 불가) |

**보상 시스템:**
| 항목 | 기본값 | 취약 루틴 보너스 |
|------|--------|-----------------|
| 경험치 | 20 EXP | x2 (40 EXP) |
| 골드 | 50 G | x2 (100 G) |
| 보스 데미지 | 4 + 장비보너스 | x2 |
| 아이템 드랍 확률 | 2% | 20% |

---

## 2. 플레이어 시스템

### 2.1 레벨 시스템
**레벨업 필요 경험치:**
```
maxExp = 100 + 50 × (level - 1)

Lv.1: 100 EXP
Lv.2: 150 EXP
Lv.3: 200 EXP
Lv.4: 250 EXP
...
```

**레벨업 처리:**
- 경험치 초과분은 다음 레벨로 이월
- 연속 레벨업 가능 (한 번에 여러 레벨 상승)

### 2.2 골드 시스템
**획득 방법:**
| 방법 | 획득량 |
|------|--------|
| 루틴 완료 | 50 G |
| 취약 루틴 완료 | 100 G |
| 보스 처치 | 500 G (보너스) |

**사용처:**
- 아이템 상점에서 장비 구매

### 2.3 인벤토리 시스템
**슬롯 구성:**
| 슬롯 | 설명 |
|------|------|
| HEAD | 머리 장비 (모자, 투구) |
| BODY | 몸통 장비 (갑옷, 옷) |
| LEG | 다리 장비 |
| WEAPON | 무기 |
| ETC | 기타 아이템 (소모품, 재화) |

**장착 규칙:**
- 각 슬롯에는 1개의 아이템만 장착 가능
- 장착 시 기존 장비는 인벤토리로 이동 (자동 교체)
- 장착 해제 시 인벤토리로 이동

### 2.4 스트릭 시스템
**기록 방식:**
- 루틴 완료 시 해당 날짜를 `streakDates` Set에 추가
- 날짜별로 1회만 기록 (여러 루틴 완료해도 1개 기록)

**표시:**
- 연속 달성 탭의 달력에서 녹색으로 표시
- 오늘 날짜는 주황색 테두리로 강조

### 2.5 취약 루틴
**설정 시점:**
- 프로그램 시작 시 취약 루틴 미설정 상태면 입력 팝업 표시
- 매월 1일 초기화됨

**보너스 효과:**
- 해당 루틴 완료 시 모든 보상 2배
- 아이템 드랍 확률 10배 (2% → 20%)

---

## 3. 보스 시스템

### 3.1 보스 등장
**규칙:**
- 매월 새로운 보스 등장
- 월이 바뀌면 자동으로 새 보스 소환
- 이전 보스 미처치 시 배드 엔딩 스토리 표시

### 3.2 보스 스펙
| 항목 | 기본값 |
|------|--------|
| 최대 HP | 100 |
| 소환 조건 | 매월 1일 (자동) |

### 3.3 데미지 계산
```
데미지 = 기본 데미지(4) + 장비 공격력 보너스

취약 루틴 완료 시: 데미지 × 2
```

**예시:**
- 장비 없음, 일반 루틴: 4 데미지
- 무기(+5) 장착, 일반 루틴: 9 데미지
- 무기(+5) 장착, 취약 루틴: 18 데미지

### 3.4 보스 처치 보상
- 골드 500G 추가 지급
- 해피 엔딩 스토리 표시

### 3.5 월별 보스 컨셉
| 월 | 보스 이름 | 설명 | 이미지 |
|----|----------|------|--------|
| 1월 | 희망찬 겨울 | 새해의 결심을 희망하는 겨울 | - |
| 2월 | 졸음의 초콜릿 몬스터 | 달콤한 잠으로 유혹하는 몬스터 | - |
| 11월 | 빼빼로킹 | 빼빼로를 주면 안잡아먹는답니다 | StickChocolateBoss.png |
| 12월 | 나태의 눈사람 | 새해의 결심을 얼려버리려는 눈사람 | SnowBoss.png |

---

## 4. 아이템 시스템

### 4.1 아이템 드랍
**드랍 확률:**
| 조건 | 확률 |
|------|------|
| 일반 루틴 완료 | 2% |
| 취약 루틴 완료 | 20% |

**드랍 가능 아이템:**
| 아이템 | 슬롯 | 효과 | 가격 |
|--------|------|------|------|
| 루틴 달성 보물 상자 | ETC | 경험치 +5 | 100G |
| 행운의 동전 | ETC | 없음 | 5G |
| 빛나는 은화 | ETC | 없음 | 100G |
| 집중의 향로 | ETC | 경험치 +2 | 70G |
| 초심자의 목검 | WEAPON | 공격력 +5 | 50G |

### 4.2 아이템 상점
**판매 아이템:**
| 아이템 | 슬롯 | 효과 | 가격 |
|--------|------|------|------|
| 수련용 목검 | WEAPON | 공격력 +5 | 50G |
| 무거운 철검 | WEAPON | 공격력 +15 | 200G |
| 용사의 검 | WEAPON | 공격력 +50 | 1000G |
| 가죽 모자 | HEAD | 경험치 +5 | 100G |
| 학자의 안경 | HEAD | 경험치 +10 | 300G |
| 여행자의 옷 | BODY | 경험치 +5 | 150G |
| 기사의 갑옷 | BODY | 공격력 +20 | 500G |

### 4.3 장비 효과
**공격력 보너스 (BOSS_ATTACK):**
- 루틴 완료 시 보스에게 주는 추가 데미지

**경험치 보너스 (EXP_BONUS):**
- (현재 미구현) 경험치 획득량 증가 예정

---

## 5. 통계 기능

### 5.1 월간 달성률
**계산:**
```
달성률 = (루틴 수행 일수 / 해당 월 총 일수) × 100%
```

### 5.2 태그별 통계
**표시 방식:**
- 막대그래프로 태그별 수행 횟수 시각화
- 이번 달에 완료된 루틴만 집계

### 5.3 격려 메시지
| 달성률 | 메시지 |
|--------|--------|
| 0% | 시작이 반입니다! |
| 1~30% | 조금씩 나아가고 있어요! |
| 31~70% | 좋은 흐름이에요! |
| 71~99% | 거의 다 왔어요! |
| 100% | 완벽한 한 달! |

---

## 6. 데이터 저장

### 6.1 자동 저장 시점
| 이벤트 | 저장 대상 |
|--------|----------|
| 루틴 완료 | 루틴, 플레이어, 보스 |
| 프로그램 종료 | 루틴, 플레이어, 보스 |

### 6.2 저장 파일
| 데이터 | 파일 | 위치 |
|--------|------|------|
| 루틴 | routines_data.txt | 프로젝트 루트 |
| 플레이어 | player_data.dat | 프로젝트 루트 |
| 보스 | boss_data.txt | 프로젝트 루트 |
